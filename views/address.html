{{define "address"}}
<div class="panel panel-default">
	<div class="panel-heading" style="background-color: #222; color: #ffffff;">
		<h4 class="panel-title">{{if .User.MultiSigAddress }}Address Submitted{{else}}Submit Address{{end}}</h4>
	</div>
	<div class="panel-body" style="background-color: #333; color: #ffffff;">
	{{range .Flash}}
	<div class="alert alert-danger">{{.}}</div>
	{{end}}
{{if .User.MultiSigAddress}}
    <div style="overflow:auto">
	<p><span style="font-size: large;"><b>Your public key address has been accepted and cannot be changed at this time.</b></span></p>
	<p><span style="font-size: larger;"><b>Public Key Address:</b> {{ .User.UserPubKeyAddr }}</span></p>
    </div>
{{ else }}
	<p><span style="font-size: large;">The directions below require that you
	have setup the Decred software and have obtained Decred that you can
	purchase tickets with. The
	<a href="https://docs.decred.org/getting-started/overview/">Getting Started</a>
	section of the <a href="https://docs.decred.org/">Decred Docs website</a>
	has operating system specific directions that covers all of the necessary
	steps.</span></p>
	<p><span style="font-size: large;">To join the pool, provide a public key
	address which can be used to generate a 1-of-2 multisignature script.
	The multisignature script will be generated by the pool and returned to you
	along with a P2SH address to give voting rights to. The P2SH address has the
	prefix
	<b>{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}c</b>.</span></p>

	<p><span style="font-size: large;">It is recommended to generate a new
	account when joining a stake pool. This is because accounts are hardened
	so in the case of a total stake pool failure/shutdown, it would be safe
	to give the private key of the account to another stake pool as long as
	that account only does voting and nothing else.</span></p>

	<div class="cmd"><pre>
$ dcrctl {{ if eq .Network "testnet"}}--testnet{{end}} --wallet createnewaccount voting
	</pre></div>

	<p><span style="font-size: large;">To generate a public key address, create
	a new wallet address with <b>getnewaddress &lt;yourAccount&gt;</b>. Then,
	call <b>validateaddress &lt;yourAddress&gt;</b> and retrieve the address
	listed in the <b>pubkeyaddr</b> field of the response. The <b>pubkeyaddr</b>
	starts with
	<b>{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}k</b>.</span></p>

	<p><span style="font-size: large;">The following is an example:</span></p>

	<div class="cmd"><pre>
$ dcrctl {{ if eq .Network "testnet"}}--testnet{{end}} --wallet getnewaddress voting
{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}sExampleAddr1For2Demo3PurposesOnly
$ dcrctl {{ if eq .Network "testnet"}}--testnet{{end}} --wallet validateaddress {{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}sExampleAddr1For2Demo3PurposesOnly
{
  "isvalid": true,
  "address": "{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}sExampleAddr1For2Demo3PurposesOnly",
  "ismine": true,
  "pubkeyaddr": <b>"{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}kExample0Addr1For2Demo4Purposes5Only6Do7Not8Use9Pls0"</b>,
  "pubkey": "022801337beefc0ffee1dab8d4ffa898a782466c9a1fc00ca8863de5438dc07dcc",
  "iscompressed": true,
  "account": "voting"
}
	</pre></div>

	<p><span style="font-size: large;">Copy and paste the <b>pubkeyaddr</b>
	that starts with
	<b>{{ if eq .Network "mainnet"}}D{{end}}{{ if eq .Network "testnet"}}T{{end}}k</b>
	into the form below. Once your P2SH address has been generated,
	instructions will be given on how to purchase tickets that the pool can use
	to vote.</span></p>
	
		<form method="post" class="form-large form-inline" role="form">
			<div class="form-group">
				<label for="UserPubKeyAddr">Public Key Address: &nbsp;</label>
				<input id="UserPubKeyAddr" name="UserPubKeyAddr" type="text" placeholder="Enter Address" class="form-control" minlength=40 maxlength=65 required="required" size=60> &nbsp;
				<button id="signup" name="signup" class="btn btn-primary">Submit Address</button>
			</div>
		<input type="hidden" name="{{.CsrfKey}}" value={{.CsrfToken}}>
		</form>
{{ end }}
	</div>
</div>
{{end}}
